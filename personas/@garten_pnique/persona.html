<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>@garten_pnique — Generated Self</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@300;400;500&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="../../assets/css/style.css" />
  <link rel="stylesheet" href="persona.css" />
  <script src="elevenlabs-config.js"></script>
  <script src="https://unpkg.com/@elevenlabs/convai-widget-embed" async type="text/javascript"></script>
</head>

<body>
  <header>
    <a href="../../index.html" style="text-decoration: none; color: inherit;">
      <div class="logo">생성된 자아들 / Generated Selves</div>
    </a>
    <nav>
      <a href="../../index.html">Home</a>
      <a href="../../about.html">About</a>
      <a href="#">Contact</a>
    </nav>
  </header>

  <div class="container">
    <a href="../../index.html" class="back-button">← Back</a>

    <div class="detail-header">
      <h1 class="detail-title">@garten_pnique</h1>
      <p class="detail-subtitle">휴식의 큐레이터 · Curating Rituals of Intentional Care</p>

      <p class="core-identity-description">
        @garten_pnique는 식물, 공간, 빛을 매개로 ‘느린 성장’의 가치를 제시하는 감각적 장인입니다. 의도된 돌봄과 미니멀리즘을 결합하여, 방문자가 잠시 머물며 숨을 고를 수 있는 회복의 장면을
        기록합니다.
      </p>

      <p class="core-identity-keywords">
        #느린성장 #의도된돌봄 #미니멀리즘 #바이오필리아 #휴식의미학
      </p>
    </div>

    <div class="detail-content">
      <div class="top-section">
        <div class="video-section">
          <div style="position: relative; width: 100%; padding-bottom: 56.25%; height: 0; background: #000;">
            <iframe src="https://www.youtube.com/embed/pYdV2U6ST90?feature=youtu.be" title="YouTube video player"
              style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border: 0;" frameborder="0"
              allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
              allowfullscreen></iframe>
          </div>
        </div>

        <div class="audio-section-left">
          <h3>녹음된 대화 (Recorded Conversation) / 2025-11-21</h3>
          <div class="audio-container">
            <div class="audio-player-compact">
              <audio id="conversationAudio" controls preload="metadata">
                <source src="" type="audio/mpeg">
                <source src="" type="audio/wav">
                브라우저가 오디오 재생을 지원하지 않습니다.
              </audio>
            </div>
            <div class="audio-controls-compact">
              <button id="loadConversationBtn" class="load-btn">대화 불러오기</button>
              <button id="downloadAudioBtn" class="download-btn" style="display: none;">다운로드</button>
            </div>
          </div>
        </div>
      </div>

      <div class="middle-section">
        <div class="transcript-section-right">
          <h3>대화 내용 (Transcript) / 2025-11-21</h3>
          <div class="transcript-container">
            <div class="transcript-header">
              <div class="transcript-controls">
                <button id="loadTranscriptBtn" class="load-btn">트랜스크립트 불러오기</button>
                <button id="toggleTranscriptBtn" class="toggle-btn" style="display: none;">보기/숨기기</button>
              </div>
            </div>

            <div id="transcriptContent" class="transcript-content-wide" style="display: none;">
              <div class="loading" id="transcriptLoading">트랜스크립트를 불러오는 중...</div>
              <div id="transcriptText" class="transcript-text-wide" style="display: none;"></div>
            </div>
          </div>
        </div>

        <div class="agent-section">
          <h3>자아와 대화하기 (Talking to the Self) / 10min. max.</h3>
          <div id="widgetContainer" class="widget-container">
            <elevenlabs-convai agent-id="agent_7101ka4r9g22evh9dgzn901vgy9e"></elevenlabs-convai>
            <script src="https://unpkg.com/@elevenlabs/convai-widget-embed" async type="text/javascript"></script>
          </div>
        </div>
      </div>

      <div class="persona-overview">
        <div class="overview-section">
          <h3 class="overview-title">시각적 자아 (Visual Self)</h3>
          <div class="overview-content">
            <p>환원주의적 미학으로 비워낸 공간에 빛, 그림자, 식물을 정확히 배치합니다.</p>
            <ul>
              <li>형태·선·질감에 집중한 절제된 프레이밍</li>
              <li>빈티지 오브제와 자연 요소의 촉각적 대비</li>
              <li>식물에서 공간, 도시, 개념으로 확장되는 큐레이션</li>
            </ul>
          </div>
        </div>

        <div class="overview-section">
          <h3 class="overview-title">개념적 자아 (Conceptual Self)</h3>
          <div class="overview-content">
            <p>계절의 순환과 역설을 통해 느린 성장의 철학을 제안합니다.</p>
            <ul>
              <li>겨울/봄, 유연함/강인함 같은 대비를 합으로 통합</li>
              <li>‘완료’라는 의식을 통해 과정의 가치를 공표</li>
              <li>자연의 법칙을 삶의 조언으로 번역하는 변증법적 사유</li>
            </ul>
          </div>
        </div>

        <div class="overview-section">
          <h3 class="overview-title">사회적 자아 (Social Self)</h3>
          <div class="overview-content">
            <p>조용한 옹호자의 어조로 휴식, 독서, 멈춤의 권리를 공론화합니다.</p>
            <ul>
              <li>“쉬어가세요”와 같은 선언형 문장으로 감정의 여백 제공</li>
              <li>공감의 언어로 고객과의 따뜻한 경계를 유지</li>
              <li>다감각 묘사로 관객을 감정적 휴식에 초대</li>
            </ul>
          </div>
        </div>

        <div class="overview-section">
          <h3 class="overview-title">핵심 특성</h3>
          <div class="overview-content">
            <ul>
              <li><strong>의도된 돌봄:</strong> 시간과 정성을 기록하는 장인의 태도</li>
              <li><strong>미니멀리즘 본질주의:</strong> 비움을 통해 본질을 선명하게 함</li>
              <li><strong>정서적 안정감:</strong> 낮고 넓은 긍정 정서를 꾸준히 유지</li>
              <li><strong>교육적 옹호:</strong> 느린 삶과 독서, 자연을 사회적 가치로 제안</li>
            </ul>
          </div>
        </div>
      </div>



      <div class="cta-section">
        <h2 class="cta-title">더 자세한 분석 보기</h2>
        <div class="cta-buttons">
          <a href="analysis_report.html" class="cta-button">심층 분석 리포트</a>
          <a href="infographic_garten_pnique.html" class="cta-button">인포그래픽</a>
          <a href="https://instagram.com/garten_pnique" class="cta-button" target="_blank">Instagram 보기</a>
        </div>
      </div>
    </div>
  </div>

  <script>
    const config = window.ELEVENLABS_CONFIG || {
      API_KEY: 'YOUR_ELEVENLABS_API_KEY',
      BASE_URL: 'https://api.elevenlabs.io/v1',
      CONVERSATION_ID: ''
    };
    const configErrors = window.validateConfig ? window.validateConfig() : [];
    if (configErrors.length > 0) {
      console.warn('ElevenLabs 설정 오류:', configErrors);
    }

    let currentAudioUrl = null;
    let currentTranscript = null;

    const loadConversationBtn = document.getElementById('loadConversationBtn');
    const loadTranscriptBtn = document.getElementById('loadTranscriptBtn');
    const downloadAudioBtn = document.getElementById('downloadAudioBtn');
    const toggleTranscriptBtn = document.getElementById('toggleTranscriptBtn');
    const conversationAudio = document.getElementById('conversationAudio');
    const transcriptContent = document.getElementById('transcriptContent');
    const transcriptText = document.getElementById('transcriptText');
    const transcriptLoading = document.getElementById('transcriptLoading');
    const widgetContainer = document.getElementById('widgetContainer');

    let isWidgetExpanded = false;
    function expandWidget() {
      if (widgetContainer && !isWidgetExpanded) {
        widgetContainer.classList.add('expanded');
        isWidgetExpanded = true;
      }
    }
    if (widgetContainer) {
      widgetContainer.addEventListener('click', function (e) {
        if (e.target.tagName === 'IFRAME' || e.target.closest('iframe')) {
          return;
        }
        if (!isWidgetExpanded) {
          expandWidget();
        }
      });
    }

    loadConversationBtn.addEventListener('click', loadConversationAudio);
    loadTranscriptBtn.addEventListener('click', loadTranscript);
    downloadAudioBtn.addEventListener('click', downloadAudio);
    toggleTranscriptBtn.addEventListener('click', toggleTranscript);

    async function loadConversationAudio() {
      try {
        loadConversationBtn.textContent = '불러오는 중...';
        loadConversationBtn.disabled = true;
        const audioUrl = await fetchConversationAudio();
        if (audioUrl) {
          conversationAudio.src = audioUrl;
          currentAudioUrl = audioUrl;
          downloadAudioBtn.style.display = 'inline-block';
          loadConversationBtn.textContent = '오디오 불러오기 완료';
          loadConversationBtn.style.background = '#28a745';
        }
      } catch (error) {
        console.error('오디오 로드 실패:', error);
        alert(`오디오를 불러오는 중 오류가 발생했습니다: ${error.message}`);
        loadConversationBtn.textContent = '대화 불러오기';
        loadConversationBtn.style.background = '#000';
      } finally {
        loadConversationBtn.disabled = false;
      }
    }

    async function loadTranscript() {
      try {
        loadTranscriptBtn.textContent = '불러오는 중...';
        loadTranscriptBtn.disabled = true;
        transcriptContent.style.display = 'block';
        transcriptLoading.style.display = 'block';
        transcriptText.style.display = 'none';
        const transcript = await fetchTranscript();
        if (transcript) {
          currentTranscript = transcript;
          displayTranscript(transcript);
          toggleTranscriptBtn.style.display = 'inline-block';
          loadTranscriptBtn.textContent = '트랜스크립트 불러오기 완료';
          loadTranscriptBtn.style.background = '#28a745';
          expandWidget();
        }
      } catch (error) {
        console.error('트랜스크립트 로드 실패:', error);
        alert('트랜스크립트를 불러오는 중 오류가 발생했습니다.');
        loadTranscriptBtn.textContent = '트랜스크립트 불러오기';
        loadTranscriptBtn.style.background = '#000';
      } finally {
        loadTranscriptBtn.disabled = false;
        transcriptLoading.style.display = 'none';
      }
    }

    function displayTranscript(transcript) {
      transcriptText.innerHTML = '';
      let messages = [];
      if (Array.isArray(transcript)) {
        messages = transcript;
      } else if (transcript.messages && Array.isArray(transcript.messages)) {
        messages = transcript.messages;
      } else if (transcript.conversation && Array.isArray(transcript.conversation)) {
        messages = transcript.conversation;
      }

      messages.forEach(entry => {
        const messageDiv = document.createElement('div');
        messageDiv.className = 'message';
        const role = entry.role || 'unknown';
        const message = entry.message || entry.text || '';
        const timestamp = entry.timestamp || entry.created_at || '';

        let roleDisplay = role;
        if (role === 'user') roleDisplay = '사용자';
        else if (role === 'assistant' || role === 'agent') roleDisplay = '@garten_pnique';
        else if (role === 'system') roleDisplay = '시스템';

        const timestampSpan = document.createElement('span');
        timestampSpan.className = 'timestamp';
        timestampSpan.textContent = timestamp ? formatTimestamp(timestamp) : '';

        const speakerSpan = document.createElement('span');
        speakerSpan.className = 'speaker';
        speakerSpan.textContent = roleDisplay;

        const textSpan = document.createElement('span');
        textSpan.textContent = message;

        messageDiv.appendChild(timestampSpan);
        messageDiv.appendChild(speakerSpan);
        messageDiv.appendChild(textSpan);

        transcriptText.appendChild(messageDiv);
      });

      transcriptText.style.display = 'block';
      if (transcriptText.scrollHeight > transcriptContent.clientHeight) {
        transcriptContent.style.borderBottom = '1px solid #e0e0e0';
      }
    }

    function formatTimestamp(timestamp) {
      if (!timestamp) return '';
      try {
        const date = new Date(timestamp);
        const hours = date.getHours().toString().padStart(2, '0');
        const minutes = date.getMinutes().toString().padStart(2, '0');
        const seconds = date.getSeconds().toString().padStart(2, '0');
        return `${hours}:${minutes}:${seconds}`;
      } catch (e) {
        return timestamp;
      }
    }

    function toggleTranscript() {
      const isVisible = transcriptText.style.display !== 'none';
      transcriptText.style.display = isVisible ? 'none' : 'block';
      toggleTranscriptBtn.textContent = isVisible ? '트랜스크립트 보기' : '트랜스크립트 숨기기';
    }

    function downloadAudio() {
      if (currentAudioUrl) {
        const a = document.createElement('a');
        a.href = currentAudioUrl;
        a.download = 'garten_pnique_conversation.mp3';
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
      }
    }

    async function fetchConversationAudio() {
      if (config.API_KEY === 'YOUR_ELEVENLABS_API_KEY' || !config.CONVERSATION_ID) {
        console.warn('ElevenLabs API 설정이 완료되지 않았습니다. 데모 모드로 실행됩니다.');
        return getDemoAudioUrl();
      }
      try {
        const url = `${config.BASE_URL}/convai/conversations/${config.CONVERSATION_ID}/audio`;
        const response = await fetch(url, {
          method: 'GET',
          headers: {
            'xi-api-key': config.API_KEY,
            'Accept': 'audio/mpeg'
          }
        });
        if (!response.ok) {
          throw new Error(`HTTP ${response.status}`);
        }
        const blob = await response.blob();
        return URL.createObjectURL(blob);
      } catch (error) {
        console.error('오디오 로드 실패:', error);
        throw error;
      }
    }

    async function fetchTranscript() {
      if (config.API_KEY === 'YOUR_ELEVENLABS_API_KEY' || !config.CONVERSATION_ID) {
        console.warn('ElevenLabs API 설정이 완료되지 않았습니다. 데모 트랜스크립트를 반환합니다.');
        return getDemoTranscript();
      }
      try {
        const url = `${config.BASE_URL}/convai/conversations/${config.CONVERSATION_ID}`;
        const response = await fetch(url, {
          method: 'GET',
          headers: {
            'xi-api-key': config.API_KEY,
            'Accept': 'application/json'
          }
        });
        if (!response.ok) {
          throw new Error(`HTTP ${response.status}`);
        }
        const data = await response.json();
        if (data.transcript && Array.isArray(data.transcript)) {
          return data.transcript;
        }
        return data;
      } catch (error) {
        console.error('트랜스크립트 로드 실패:', error);
        throw error;
      }
    }

    function getDemoAudioUrl() {
      return 'https://cdn.pixabay.com/download/audio/2022/10/26/audio_f8e3f4a6c3.mp3?filename=ambient-piano-amp-strings-12467.mp3';
    }

    function getDemoTranscript() {
      return [
        { role: 'user', message: '요즘 속도가 너무 빠르게 느껴져요.' },
        { role: 'assistant', message: '잠시 비워둔 여백이 있나요? 빛이 머무를 틈을 만들어 보세요.' },
        { role: 'user', message: '기다리는 시간이 길어 답답했는데, 도움이 되네요.' },
        { role: 'assistant', message: '잘 자란 호야처럼, 느린 성장 속에서만 만나는 고요가 있습니다.' }
      ];
    }
  </script>
</body>

</html>
